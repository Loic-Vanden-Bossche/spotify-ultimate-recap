---
import Welcome from "../components/Home.astro";
import Layout from "../layouts/Layout.astro";
import { v4 as uuid } from "uuid";

export const prerender = false;

const cookies = Astro.request.headers.get("cookie");
const uuidCookie = cookies && cookies.includes("uuid");

let userUUID;

if (!uuidCookie) {
  userUUID = uuid();
  Astro.response.headers.set("Set-Cookie", `uuid=${userUUID}`);
} else {
  userUUID = cookies.split("uuid=")[1].split(";")[0];
}
---

<Layout>
  <Welcome />
  {userUUID}
</Layout>

<style is:global>
  @tailwind base;
  @tailwind components;
  @tailwind utilities;

  @layer base {
    @font-face {
      font-family: "Gotham";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: url(/fonts/GothamMedium.ttf) format("woff2");
    }
  }
</style>

<script>
  import "echarts/i18n/langFR";
</script>
